<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ProFlex‚Äî Fitness Store</title>
<style>
  :root{
    --bg:#0b0b0f;
    --panel:#12131b;
    --panel-2:#171827;
    --text:#f7f7fb;
    --muted:#a5abc1;
    --brand-1:#ff416c;
    --brand-2:#ff4b2b;
    --accent:#00ffcc;
    --ok:#28a745;
    --warn:#ffb703;
    --danger:#ef4444;
    --shadow: 0 10px 30px rgba(255,65,108,.15);
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: radial-gradient(1200px 800px at 20% -10%, rgba(255,65,108,.15), transparent 60%),
                radial-gradient(1000px 600px at 120% 10%, rgba(0,255,204,.12), transparent 60%),
                var(--bg);
    color:var(--text);
  }
  header{
    position:sticky; top:0; z-index:5;
    background:linear-gradient(90deg, var(--brand-2), var(--brand-1));
    display:flex; gap:16px; align-items:center; justify-content:space-between;
    padding:14px 20px; box-shadow:var(--shadow);
  }
  .brand{display:flex; align-items:center; gap:12px; font-weight:800; letter-spacing:.5px; text-transform:uppercase}
  .brand span{font-size:1.1rem}
  .badge{background:#fff; color:#111; padding:4px 10px; border-radius:999px; font-weight:700}

  .toolbar{display:flex; gap:10px; align-items:center}
  .cart-chip{
    background:#fff; color:#111; padding:8px 14px; border-radius:999px;
    font-weight:700; cursor:pointer; box-shadow:var(--shadow); transition:transform .15s ease;
  }
  .cart-chip:hover{transform:translateY(-2px)}

  main{max-width:1100px; margin:24px auto; padding:0 16px}

  .grid{
    display:grid; gap:22px;
    grid-template-columns: repeat(auto-fit, minmax(240px,1fr));
  }
  .card{
    background:linear-gradient(180deg, var(--panel), var(--panel-2));
    border:1px solid rgba(255,255,255,.05);
    border-radius:16px; overflow:hidden; box-shadow:var(--shadow);
    transition: transform .2s ease, box-shadow .2s ease;
  }
  .card:hover{ transform: translateY(-6px); box-shadow:0 20px 40px rgba(0,0,0,.45)}
  .thumb{height:170px; background:#0e0f17; display:flex; align-items:center; justify-content:center; font-size:46px}
  .content{padding:16px}
  .title{font-weight:700; margin:0 0 6px}
  .price{color:var(--accent); font-weight:700; margin-bottom:10px}
  .muted{color:var(--muted); font-size:.9rem}
  .row{display:flex; gap:10px; margin:10px 0}
  input[type="number"], input[type="text"], input[type="tel"], select{
    width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.08);
    background:#0e0f17; color:var(--text); outline:none;
  }
  .btn{
    appearance:none; border:none; cursor:pointer; width:100%;
    padding:10px 14px; border-radius:12px; font-weight:800; letter-spacing:.3px;
    background:linear-gradient(90deg, var(--brand-2), var(--brand-1)); color:#fff;
    box-shadow:var(--shadow); transition: transform .12s ease, filter .12s ease;
  }
  .btn:hover{ transform:translateY(-1px); filter:saturate(1.1) }
  .btn.secondary{ background:#222636; border:1px solid rgba(255,255,255,.08)}
  .btn.success{ background:linear-gradient(90deg, #10b981, #22c55e)}
  .btn.warn{ background:linear-gradient(90deg, #ffb703, #ff9e00); color:#111}

  /* Cart Modal */
  .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.6); z-index:20}
  .sheet{
    width:min(92vw, 720px); max-height:85vh; overflow:auto;
    background:linear-gradient(180deg, #141521, #0f1019);
    border:1px solid rgba(255,255,255,.06); border-radius:16px; box-shadow:var(--shadow); padding:16px;
  }
  .sheet h2{margin:6px 0 10px}
  .cart-line{display:grid; grid-template-columns:1fr auto auto; gap:10px; align-items:center; padding:10px 0; border-bottom:1px dashed rgba(255,255,255,.08)}
  .cart-line .actions{display:flex; gap:6px}
  .pill{padding:4px 8px; border-radius:999px; background:#0e0f17; border:1px solid rgba(255,255,255,.08)}
  .sum{display:flex; justify-content:space-between; margin-top:12px; font-weight:700}
  .sum .muted{font-weight:600}
  .coupon-row{display:flex; gap:8px; margin-top:10px}
  .coupon-msg{margin-top:6px; font-size:.92rem}
  .coupon-msg.ok{color:var(--accent)}
  .coupon-msg.err{color:var(--danger)}

  /* Checkout */
  .steps{display:flex; gap:8px; margin:8px 0 14px}
  .step{flex:1; text-align:center; padding:6px 8px; border-radius:999px; font-size:.85rem; background:#0e0f17; border:1px solid rgba(255,255,255,.08)}
  .step.active{background:linear-gradient(90deg, var(--brand-2), var(--brand-1))}
  .two-col{display:grid; grid-template-columns:1fr 1fr; gap:10px}

  /* Final bill */
  .bill{
    background:linear-gradient(180deg, #101220, #0b0c14);
    border:1px solid rgba(255,255,255,.08); border-radius:16px;
    padding:18px; margin-top:12px;
  }
  .bill h3{margin:8px 0 10px}
  .bill .line{display:flex; justify-content:space-between; padding:6px 0}
  .bill .total{font-size:1.2rem; color:var(--accent)}
  .print{margin-top:12px; display:flex; gap:10px}
  @media (max-width:640px){ .two-col{grid-template-columns:1fr} }
</style>
</head>
<body>

<header>
  <div class="brand">
    <span>üèãÔ∏è‚Äç‚ôÇÔ∏è</span><span>ProFlex</span>
  </div>
  <div class="toolbar">
    <div class="cart-chip" onclick="openCart()">üõí <span id="chipCount">0</span> | $<span id="chipTotal">0</span></div>
  </div>
</header>

<main>
  <h2 style="margin:6px 0 16px;">Gear Up. Fuel Up. <span style="color:var(--accent)">Perform.</span></h2>
  <section class="grid" id="productGrid"></section>
</main>

<!-- CART / CHECKOUT MODAL -->
<div class="modal" id="cartModal">
  <div class="sheet" id="sheetCart">
    <div style="display:flex; justify-content:space-between; align-items:center">
      <h2>üõí Cart</h2>
      <button class="btn secondary" style="width:auto" onclick="closeCart()">Close</button>
    </div>

    <div id="cartLines"></div>

    <div class="coupon-row">
      <input id="couponInput" type="text" placeholder="Coupon:" />
      <button class="btn" style="width:160px" onclick="applyCoupon()">Apply</button>
    </div>
    <div id="couponMsg" class="coupon-msg"></div>

    <div class="sum"><span class="muted">Subtotal</span><span>$<span id="sumSubtotal">0</span></span></div>
    <div class="sum"><span class="muted">Discount</span><span>- $<span id="sumDiscount">0</span></span></div>
    <div class="sum"><span class="muted">Tax (5%)</span><span>$<span id="sumTax">0</span></span></div>
    <div class="sum" style="font-size:1.2rem"><span>Total</span><span>$<span id="sumTotal">0</span></span></div>

    <div style="display:flex; gap:10px; margin-top:14px">
      <button class="btn warn" onclick="goCheckout()">Proceed to Checkout</button>
      <button class="btn secondary" onclick="clearCart()">Clear Cart</button>
    </div>

    <!-- CHECKOUT STEP -->
    <div id="checkoutPanel" style="display:none; margin-top:18px">
      <div class="steps">
        <div class="step active">Cart</div>
        <div class="step active">Checkout</div>
        <div class="step">Bill</div>
      </div>
      <div class="two-col">
        <div>
          <label class="muted">Full Name</label>
          <input id="custName" type="text" placeholder="" />
        </div>
        <div>
          <label class="muted">Phone</label>
          <input id="custPhone" type="tel" placeholder="" />
        </div>
      </div>
      <div class="two-col">
        <div>
          <label class="muted">Payment</label>
          <select id="paymentMethod">
            <option value="Cash">Cash</option>
            <option value="GPay">GPay</option>
            <option value="Card">Card</option>
          </select>
        </div>
        <div>
          <label class="muted">Notes (optional)</label>
          <input id="custNote" type="text" placeholder="e.g., deliver quickly" />
        </div>
      </div>
      <div style="display:flex; gap:10px; margin-top:12px">
        <button class="btn success" onclick="placeOrder()">Place Order</button>
        <button class="btn secondary" onclick="backToCart()">Back</button>
      </div>
    </div>

    <!-- BILL STEP -->
    <div id="billPanel" style="display:none; margin-top:18px">
      <div class="steps">
        <div class="step active">Cart</div>
        <div class="step active">Checkout</div>
        <div class="step active">Bill</div>
      </div>
      <div class="bill" id="billBox">
        <h3>ProFlex‚Äî Final Bill</h3>
        <div class="line"><span>Customer</span><span id="bName">-</span></div>
        <div class="line"><span>Phone</span><span id="bPhone">-</span></div>
        <div class="line"><span>Payment</span><span id="bPay">-</span></div>
        <div class="line"><span>Coupon</span><span id="bCoupon">-</span></div>
        <hr style="border-color: rgba(255,255,255,.08)">
        <div id="bItems"></div>
        <hr style="border-color: rgba(255,255,255,.08)">
        <div class="line"><span>Subtotal</span><span>$<span id="bSub">0</span></span></div>
        <div class="line"><span>Discount</span><span>-$<span id="bDisc">0</span></span></div>
        <div class="line"><span>Tax (5%)</span><span>$<span id="bTax">0</span></span></div>
        <div class="line total"><span>Total</span><span>$<span id="bTot">0</span></span></div>
        <div class="print">
          <button class="btn success" onclick="window.print()">Print Bill</button>
          <button class="btn secondary" onclick="closeCart()">Close</button>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
/* ---------- Catalog (all unitPrice items) ---------- */
const catalog = [
  { id:'shak', name:'Shaker Bottle',   unitPrice:12,  emoji:'ü•§' },
  { id:'belt', name:'Lifting Belt',    unitPrice:40,  emoji:'üõ°Ô∏è' },
  { id:'bcaa', name:'BCAA Supplement', unitPrice:30,  emoji:'üíä' },
  { id:'rope', name:'Skipping Rope',   unitPrice:15,  emoji:'ü™¢' },
  { id:'glov', name:'Gym Gloves',      unitPrice:20,  emoji:'üß§' },
  { id:'band', name:'Resistance Bands',unitPrice:18,  emoji:'üßµ' },
  { id:'mat',  name:'Yoga Mat',        unitPrice:25,  emoji:'üßò' },
  { id:'tred', name:'Treadmill',       unitPrice:500, emoji:'üõû' },
];

const coupons = { FIT10: 0.10, STRONG20: 0.20 };
const taxRate = 0.05;

const els = {
  grid: document.getElementById('productGrid'),
  chipCount: document.getElementById('chipCount'),
  chipTotal: document.getElementById('chipTotal'),
  modal: document.getElementById('cartModal'),
  lines: document.getElementById('cartLines'),
  sumSub: document.getElementById('sumSubtotal'),
  sumDis: document.getElementById('sumDiscount'),
  sumTax: document.getElementById('sumTax'),
  sumTot: document.getElementById('sumTotal'),
  couponInput: document.getElementById('couponInput'),
  couponMsg: document.getElementById('couponMsg'),
  checkoutPanel: document.getElementById('checkoutPanel'),
  billPanel: document.getElementById('billPanel'),
  bName: document.getElementById('bName'),
  bPhone: document.getElementById('bPhone'),
  bPay: document.getElementById('bPay'),
  bCoupon: document.getElementById('bCoupon'),
  bItems: document.getElementById('bItems'),
  bSub: document.getElementById('bSub'),
  bDisc: document.getElementById('bDisc'),
  bTax: document.getElementById('bTax'),
  bTot: document.getElementById('bTot'),
};

let cart = [];
let appliedCoupon = null;

/* ---------- Render Product Cards ---------- */
function renderCatalog(){
  els.grid.innerHTML = '';
  catalog.forEach((p)=>{
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="thumb">${p.emoji}</div>
      <div class="content">
        <h3 class="title">${p.name}</h3>
        <div class="price">Unit: $${p.unitPrice}</div>
        <div class="row">
          <input type="number" id="qty_${p.id}" min="1" placeholder="Qty (default 1)" />
        </div>
        <button class="btn" onclick="addToCart('${p.id}')">Add to Cart</button>
      </div>
    `;
    els.grid.appendChild(card);
  });
}

/* ---------- Cart Helpers ---------- */
function findProduct(id){ return catalog.find(p=>p.id===id); }

function addToCart(id){
  const p = findProduct(id);
  let label = p.name;
  let qty = parseInt(document.getElementById(`qty_${id}`).value,10);
  if(isNaN(qty) || qty<1) qty = 1;

  const price = p.unitPrice;
  const key = id;

  const existing = cart.find(it => it.key === key);
  if(existing){ existing.qty += qty; }
  else{ cart.push({ key, label, unit: price, qty }); }

  updateMiniChip();
  renderCart(); // removed openCart()
}

function updateMiniChip(){
  const items = cart.reduce((a,b)=>a+b.qty,0);
  const subtotal = cart.reduce((a,b)=>a+b.unit*b.qty,0);
  els.chipCount.textContent = items;
  els.chipTotal.textContent = subtotal.toFixed(2);
}

function renderCart(){
  els.lines.innerHTML = '';
  if(cart.length===0){
    els.lines.innerHTML = `<div class="muted" style="padding:12px">Your cart is empty.</div>`;
  } else {
    cart.forEach((it,idx)=>{
      const row = document.createElement('div');
      row.className = 'cart-line';
      row.innerHTML = `
        <div>${it.label} <span class="pill">${it.qty} √ó $${it.unit}</span></div>
        <div>$${(it.unit*it.qty).toFixed(2)}</div>
        <div class="actions">
          <button class="btn secondary" style="width:auto; padding:4px 10px" onclick="decQty(${idx})">-</button>
          <button class="btn secondary" style="width:auto; padding:4px 10px" onclick="incQty(${idx})">+</button>
          <button class="btn secondary" style="width:auto; padding:4px 10px" onclick="removeItem(${idx})">x</button>
        </div>
      `;
      els.lines.appendChild(row);
    });
  }
  recalc();
}

function decQty(i){ if(cart[i].qty>1){ cart[i].qty--; } else { cart.splice(i,1);} renderCart(); updateMiniChip(); }
function incQty(i){ cart[i].qty++; renderCart(); updateMiniChip(); }
function removeItem(i){ cart.splice(i,1); renderCart(); updateMiniChip(); }
function clearCart(){ cart=[]; appliedCoupon=null; els.couponInput.value=''; els.couponMsg.textContent=''; renderCart(); updateMiniChip(); }

/* ---------- Totals / Coupon ---------- */
function recalc(){
  const sub = cart.reduce((a,b)=>a+b.unit*b.qty,0);
  let dis = 0;
  if(appliedCoupon){ dis = sub*coupons[appliedCoupon]; }
  const tax = (sub-dis)*taxRate;
  const tot = sub-dis+tax;
  els.sumSub.textContent = sub.toFixed(2);
  els.sumDis.textContent = dis.toFixed(2);
  els.sumTax.textContent = tax.toFixed(2);
  els.sumTot.textContent = tot.toFixed(2);
}
function applyCoupon(){
  const code = els.couponInput.value.trim().toUpperCase();
  if(coupons[code]){
    appliedCoupon = code;
    els.couponMsg.textContent = `${code} applied: ${coupons[code]*100}% off`;
    els.couponMsg.className='coupon-msg ok';
  } else {
    appliedCoupon=null;
    els.couponMsg.textContent='Invalid coupon';
    els.couponMsg.className='coupon-msg err';
  }
  recalc();
}

/* ---------- Checkout & Bill ---------- */
function goCheckout(){
  if(cart.length===0) return;
  els.checkoutPanel.style.display='block';
}
function backToCart(){ els.checkoutPanel.style.display='none'; }
function placeOrder(){
  const name=document.getElementById('custName').value.trim();
  const phone=document.getElementById('custPhone').value.trim();
  const pay=document.getElementById('paymentMethod').value;
  if(!name || !phone){ alert("Please enter name & phone"); return; }

  const sub=parseFloat(els.sumSub.textContent);
  const dis=parseFloat(els.sumDis.textContent);
  const tax=parseFloat(els.sumTax.textContent);
  const tot=parseFloat(els.sumTot.textContent);

  els.bName.textContent=name;
  els.bPhone.textContent=phone;
  els.bPay.textContent=pay;
  els.bCoupon.textContent=appliedCoupon||'-';
  els.bSub.textContent=sub.toFixed(2);
  els.bDisc.textContent=dis.toFixed(2);
  els.bTax.textContent=tax.toFixed(2);
  els.bTot.textContent=tot.toFixed(2);

  els.bItems.innerHTML='';
  cart.forEach(it=>{
    const div=document.createElement('div');
    div.className='line';
    div.innerHTML=`<span>${it.label} (${it.qty}√ó$${it.unit})</span><span>$${(it.qty*it.unit).toFixed(2)}</span>`;
    els.bItems.appendChild(div);
  });

  els.checkoutPanel.style.display='none';
  els.billPanel.style.display='block';
}

/* ---------- Modal ---------- */
function openCart(){ els.modal.style.display='flex'; renderCart(); }
function closeCart(){ els.modal.style.display='none'; els.checkoutPanel.style.display='none'; els.billPanel.style.display='none'; }

renderCatalog();
</script>
</body>
</html>
